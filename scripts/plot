#!/usr/bin/env gnuplot

set multiplot layout 4,2 title "Kalman Filter Simulation"

# True vs Estimated Position (x, y)
set title "True vs Estimated Position (XY)"
set xlabel "X (ft)"
set ylabel "Y (ft)"
plot \
    "output.txt" using 2:3 with lines title "True Position", \
    "output.txt" using 10:11 with lines title "Estimated Position"

# True vs Estimated Depth (Z)
set title "True vs Estimated Depth"
set xlabel "Step"
set ylabel "Depth (ft)"
plot \
    "output.txt" using 1:4 with lines title "True Depth", \
    "output.txt" using 1:12 with lines title "Estimated Depth"

# True vs Estimated Speed over time
set title "True vs Estimated Speed"
set xlabel "Step"
set ylabel "Speed (ft/s)"
plot \
    "output.txt" using 1:8 with lines title "True Speed", \
    "output.txt" using 1:16 with lines title "Estimated Speed"

# True vs Estimated Heading over time
set title "True vs Estimated Heading"
set xlabel "Step"
set ylabel "Heading"
plot \
    "output.txt" using 1:9 with lines title "True Heading", \
    "output.txt" using 1:17 with lines title "Estimated Heading"

# Position Error over time
set title "Position Error Over Time"
set xlabel "Step"
set ylabel "Error (ft)"
plot "output.txt" using 1:18 with lines title "Position Error"

# Velocity Error over time
set title "Velocity Error Over Time"
set xlabel "Step"
set ylabel "Error (ft/s)"
plot "output.txt" using 1:19 with lines title "Position Error"


# Position Error Estimate (Standard Deviation)
set title "Position Error Estimate (Std Dev)"
set xlabel "Step"
set ylabel "Std Dev (ft)"
plot \
    "output.txt" using 1:20 with lines title "Std Dev X", \
    "output.txt" using 1:21 with lines title "Std Dev Y", \
    "output.txt" using 1:22 with lines title "Std Dev Z"

# Velocity Error Estimate (Standard Deviation)
set title "Velocity Error Estimate (Std Dev)"
set xlabel "Step"
set ylabel "Std Dev (ft/s)"
plot \
    "output.txt" using 1:23 with lines title "Std Dev Vx", \
    "output.txt" using 1:24 with lines title "Std Dev Vy", \
    "output.txt" using 1:25 with lines title "Std Dev Vz"

unset multiplot
pause -1
